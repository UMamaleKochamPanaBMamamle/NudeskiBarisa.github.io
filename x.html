<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/><link rel="icon" href="./icon.png">
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <script src="./data.json"></script><script src="./codeurl.js"></script>
    <script>
      var stop=false,x = new URLSearchParams(location.search).get("d");
      if(x!==null) var x = decodeId(x);
      else location.href = "./e";
      if(typeof data[x]==='undefined') location.href = "./e";
      if(data[x]['filetype']=="link") location.href = data[x]['source'];
      async function checkIfFile(){
        if(data[x]['filetype']=="file") {
          location.href = data[x]['source'];
          stop=true;
          await new Promise(r => setTimeout(r, 3000));
          location.href = "./e";
        }
      } checkIfFile();
      document.write("<title>"+data[x]['title']+"</title>");
      if(stop==true) document.write('<!--');
    </script>
  </head>
  <body>
    <input type="button" onclick="location.href = './e'" value="File List" id="filelist_button"/>
    <script>
      if(data[x]['filetype'] != "img"){
        document.write("<"+data[x]['filetype']+" id='file' controls><source src='"+data[x]['source']+"' /></"+data[x]['filetype']+">");
        window.onload = function(){
          var y = document.getElementById('file');
          if(localStorage.getItem('vol') == null) localStorage.setItem('vol', 1)
          y.volume = localStorage.getItem('vol');
          y.onvolumechange = function(){localStorage.setItem('vol', y.volume)};
        }
      } else document.write("<img id='file' src='"+data[x]['source']+"' />");
    </script>
    <script src="./resize.js"></script>
  </body>
</html>
